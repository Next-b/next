/*
	base64-clean
*/

var R = require("ramda");
var escapeRegex = require("escape-string-regexp");

var variants = require("base64-variants");

// Default options
var defaults = R.mixin({
	variant: "base64"
});


/*
	Functionality
*/

var main = R.curry(function (options, data) {
	options = defaults(options);

	// Build a partial regular expression from the keyspace
	var partialRegex = R.compose(
		escapeRegex, // Escape string for use as a regex
		R.join(""), // Turn the array into a string
		R.values // Build an array of keyspace values
	)(variants[options.variant].keyspace);
	var regex = "[^A-Za-z0-9" + partialRegex + "]";

	return R.replace(new RegExp(regex, "g"), "")(data);
});


/*
	Exports
*/

if (typeof module !== "undefined") {
	module.exports = main;
}
